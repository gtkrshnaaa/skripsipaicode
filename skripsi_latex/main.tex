% Main LaTeX file for the thesis
% All comments are in English as per coding convention, but content is Indonesian.

\documentclass[12pt,a4paper]{report}

% --- Packages ---
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[indonesian]{babel}
\usepackage{mathptmx}
\usepackage{geometry}
\usepackage{setspace}
\usepackage{graphicx}

% --- Capitalize List Titles (Babel Override) ---
\addto\captionsindonesian{
  \renewcommand{\contentsname}{DAFTAR ISI}
  \renewcommand{\listfigurename}{DAFTAR GAMBAR}
  \renewcommand{\listtablename}{DAFTAR TABEL}
  \renewcommand{\listtablename}{DAFTAR TABEL}
}
\usepackage{tocloft} % Enhance TOC formatting
\renewcommand{\cftchapdotsep}{\cftdotsep} % Add dots for chapters
\renewcommand{\cftsecdotsep}{\cftdotsep} % Add dots for sections
% Center and Bold 14pt for List Titles
\renewcommand{\cfttoctitlefont}{\hfill\bfseries\fontsize{14pt}{17pt}\selectfont}
\renewcommand{\cftaftertoctitle}{\hfill}
\renewcommand{\cftloftitlefont}{\hfill\bfseries\fontsize{14pt}{17pt}\selectfont}
\renewcommand{\cftafterloftitle}{\hfill}
\renewcommand{\cftlottitlefont}{\hfill\bfseries\fontsize{14pt}{17pt}\selectfont}
\renewcommand{\cftafterlottitle}{\hfill}

\usepackage{hyperref}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{float}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{array}
\usepackage{enumitem}
\usepackage{listings}
\usepackage{listingsutf8}
\usepackage{xcolor}
\usepackage{titlesec}
\usepackage{csquotes}
\usepackage{nameref}
\usepackage{indentfirst} % Ensure first paragraph is indented
\usepackage{fancyhdr} % For custom headers and footers
% Bibliography using BibTeX (simple and Ubuntu-friendly)
\usepackage[round]{natbib}
\renewcommand{\bibname}{DAFTAR PUSTAKA}
% Support for Unicode box-drawing characters in monospaced text
\usepackage{pmboxdraw}
% String manipulation for dynamic text
\usepackage{xstring}
% Native diagram and plotting packages (no external images)
\usepackage{tikz}
\usetikzlibrary{arrows.meta,positioning,shapes.geometric,fit}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}

% --- Sub-figure label formatting (e.g. Gambar 4.7.1) ---
\renewcommand{\thesubfigure}{\arabic{subfigure}}
\DeclareCaptionLabelFormat{mysublab}{\figurename\ \thefigure.\thesubfigure}
\captionsetup[subfigure]{labelformat=mysublab, labelsep=colon}


% --- Page setup ---
\geometry{a4paper, top=3cm, left=4cm, bottom=3cm, right=3cm, headheight=15pt}
\onehalfspacing

% --- Disable Hyphenation (Justified but no word breaking) ---
\tolerance=1
\emergencystretch=\maxdimen
\hyphenpenalty=10000
\hbadness=10000

% --- Table Padding ---
\setlength{\tabcolsep}{4pt}


% --- Remove extra paragraph spacing for consistency ---
\setlength{\parskip}{0pt} % No extra space between paragraphs
\setlength{\parindent}{1.27cm} % Standard indentation (0.5 inch / approx 1.27cm)

% --- Configure list spacing to match body text ---
\setlist{nosep, topsep=0pt, partopsep=0pt, itemsep=0pt, parsep=0pt}

% --- Hyperref setup ---
\hypersetup{
  colorlinks=true,
  linkcolor=black,
  citecolor=black,
  urlcolor=black,
  pdfauthor={I PUTU GEDE GILANG TEJA KRISHNA},
  pdftitle={PAICODE: AGENTIC AI BERBASIS CLI UNTUK OTOMASI AKTIVITAS PEMROGRAMAN DAN PENGEMBANGAN PERANGKAT LUNAK DI LINUX YANG DITENAGAI LLM MELALUI API}
}

% --- Listings (code) setup ---
\definecolor{codebg}{RGB}{245,245,245}
\lstdefinestyle{code}{
  backgroundcolor=\color{codebg},
  basicstyle=\ttfamily\small,
  keywordstyle=\color{blue},
  stringstyle=\color{teal},
  commentstyle=\color{gray},
  numbers=left,
  numberstyle=\tiny, 
  stepnumber=1,
  numbersep=8pt,
  showstringspaces=false,
  tabsize=2,
  breaklines=true,
  frame=single,
  framerule=0.3pt
}
\lstset{style=code}

% --- Chapter format (optional, cleaner look) ---
\titleformat{\chapter}[display]
  {\bfseries\fontsize{14pt}{17pt}\selectfont}
  {\centering\MakeUppercase{Bab}~\Roman{chapter}}
  {1ex}
  {\vspace{1ex}\centering}
\titlespacing{\chapter}{0pt}{0pt}{20pt}

% --- Section/Subsection format (Force 12pt as per requirement) ---
\titleformat{\section}
  {\bfseries\normalsize} % 12pt Bold
  {\thesection}
  {1em}
  {}
\titlespacing{\section}{0pt}{0pt}{0pt}

\titleformat{\subsection}
  {\bfseries\normalsize} % 12pt Bold
  {\thesubsection}
  {1em}
  {}
\titlespacing{\subsection}{0pt}{0pt}{0pt}

\titleformat{\subsubsection}
  {\bfseries\normalsize} % 12pt Bold
  {\thesubsubsection}
  {1em}
  {}
\titlespacing{\subsubsection}{0pt}{0pt}{0pt}

% --- Page styles with fancyhdr ---
% Style for frontmatter: page number at bottom center (modified as requested)
\fancypagestyle{frontmatterstyle}{
  \fancyhf{} % Clear all headers and footers
  \fancyfoot[C]{\thepage} % Page number at bottom center
  \renewcommand{\headrulewidth}{0pt} % No header rule
  \renewcommand{\footrulewidth}{0pt} % No footer rule
}

% Redefine plain to be same as frontmatterstyle (for TOC, LOF, LOT)
\fancypagestyle{plain}{
  \fancyhf{} % Clear all headers and footers
  \fancyfoot[C]{\thepage} % Page number at bottom center
  \renewcommand{\headrulewidth}{0pt} % No header rule
  \renewcommand{\footrulewidth}{0pt} % No footer rule
}

% Style for mainmatter: page number at Top Right (regular pages)
\fancypagestyle{mainmatterstyle}{
  \fancyhf{} % Clear all headers and footers
  \fancyhead[R]{\thepage} % Page number at top right
  \renewcommand{\headrulewidth}{0pt} % No header rule
  \renewcommand{\footrulewidth}{0pt} % No footer rule
}

% Style for chapter pages in mainmatter (optional custom name, though standard uses 'plain')
\fancypagestyle{chapterplain}{
  \fancyhf{} % Clear all headers and footers  
  \fancyfoot[C]{\thepage} % Page number at bottom center
  \renewcommand{\headrulewidth}{0pt} % No header rule
  \renewcommand{\footrulewidth}{0pt} % No footer rule
}

% --- Document meta (edit these) ---
\newcommand{\JudulSkripsi}{PAICODE: AGENTIC AI BERBASIS CLI UNTUK OTOMASI AKTIVITAS PEMROGRAMAN DAN PENGEMBANGAN PERANGKAT LUNAK DI LINUX YANG DITENAGAI LLM MELALUI API}
\newcommand{\NamaMahasiswa}{I PUTU GEDE GILANG TEJA KRISHNA}
\newcommand{\NIM}{225410001}
\newcommand{\Prodi}{Informatika}
\newcommand{\Fakultas}{Teknologi Informasi}
\newcommand{\Universitas}{Universitas Teknologi Digital Indonesia}
\newcommand{\Tahun}{2025}
\newcommand{\TahunAngkatan}{2022}

% --- Watermark Setup ---
\newcommand{\WatermarkBackground}{%
  \begin{tikzpicture}[remember picture, overlay]
    \node[opacity=1, inner sep=0pt] at ([xshift=0.5cm]current page.center) {
      \includegraphics[width=8cm]{assets/img/yellowscaleutdilogo.png}
    };
  \end{tikzpicture}%
}

\begin{document}
\setlength{\parindent}{1.27cm} % Force indentation inside document body
\newcommand{\customindent}{\leavevmode\hspace{1.27cm}} % Explicit indentation command


% --- Cover (Sampul Depan) ---
\include{front_cover}

% --- Title Page (Halaman Judul) ---
% Start Roman numbering from here (i)
\pagenumbering{roman}
\pagestyle{frontmatterstyle} % Apply frontmatter style (page number top right)
\include{front_halaman_judul}

% Skip page ii (blank/hidden) so Approval starts at iii
\stepcounter{page}

% --- Approval Pages (iii, iv) ---
\include{front_persetujuan}
\include{front_pengesahan}

% --- Declaration of Authenticity (v) ---
\include{front_pernyataan}

% --- Dedication (vi) ---
\include{front_motto_persembahan}

% --- Preface (vii) ---
\include{front_kata_pengantar}

% --- Table of contents & lists (viii, ix, x) ---
\cleardoublepage
\addcontentsline{toc}{chapter}{DAFTAR ISI}
\tableofcontents

\cleardoublepage
\addcontentsline{toc}{chapter}{DAFTAR GAMBAR}
\listoffigures

\cleardoublepage
\addcontentsline{toc}{chapter}{DAFTAR TABEL}
\listoftables

% --- Abstract (xi, xii) ---
\chapter*{INTISARI}
\addcontentsline{toc}{chapter}{INTISARI}
Penelitian ini mengusulkan \textbf{Paicode}, sebuah agen AI berbasis Command Line Interface (CLI) untuk membantu proses pengembangan perangkat lunak secara interaktif dengan arsitektur \textit{Single-Shot Intelligence}. Sistem berjalan pada lingkungan terminal lokal dan melakukan \textbf{operasi berkas tingkat-aplikasi di ruang kerja proyek (project workspace)}; namun \textbf{mengirimkan cuplikan kode/konteks ke layanan LLM (Gemini) melalui API} untuk keperluan inferensi. Oleh karena itu, aspek privasi dan kerahasiaan kode \textbf{bergantung pada kebijakan penyedia API}, sedangkan pengamanan lokal difokuskan pada kebijakan \textit{path security}. Himpunan perintah yang disediakan (mis. \texttt{READ}, \texttt{WRITE}, \texttt{MODIFY}, \texttt{TREE}, \texttt{LIST\_PATH}) memungkinkan agen mengobservasi proyek, memanipulasi berkas, dan memodifikasi kode secara terarah dengan sistem perubahan berbasis \textit{diff}.

Arsitektur \textit{Single-Shot Intelligence} meningkatkan efisiensi dengan sistem panggilan API yang terdiri dari: (1) klasifikasi intensi, (2) acknowledgment dinamis, (3) fase perencanaan untuk analisis mendalam dan perencanaan komprehensif dalam format JSON, (4) fase eksekusi adaptif yang dapat berjalan dalam 1-3 subfase berdasarkan kompleksitas tugas, dan (5) saran langkah berikutnya. Sistem mencakup manajemen API key tunggal, \textit{interrupt handling} (Ctrl+C), dan pencatatan sesi ke \texttt{.pai\_history}.

Metode yang digunakan adalah \textit{Research and Development} (R\&D) dengan pendekatan \textit{prototyping} iteratif. Evaluasi dilakukan melalui skenario tugas representatif, dengan metrik efisiensi (jumlah panggilan API), ketepatan hasil (kompilasi/eksekusi), dan kepatuhan keamanan \textit{path}. Hasil menunjukkan bahwa agen \textit{stateful} dengan arsitektur \textit{Single-Shot Intelligence} dan pembatasan perubahan berbasis \textit{diff} dengan threshold ganda (500 baris absolut dan 50\% ratio maksimal) memudahkan pengembangan bertahap. Sistem eksekusi adaptif dengan 1-3 subfase menunjukkan efisiensi waktu operasional dibandingkan pendekatan tradisional yang memerlukan banyak panggilan API berulang, dengan tetap mempertahankan kualitas hasil yang baik.

\textbf{Kata kunci}: AI, agen, CLI, LLM, API, keamanan, pengembangan, perangkat lunak.

\chapter*{ABSTRACT}
\addcontentsline{toc}{chapter}{ABSTRACT}
This thesis presents \textbf{Paicode}, an agentic AI for the Command Line Interface (CLI) that assists software development through interactive, stateful workflows with a \textit{Single-Shot Intelligence} architecture. The system runs on a local terminal and performs \textbf{application-level file operations within the project workspace}, while \textbf{sending code/context snippets to an external LLM (Gemini) via API} for inference. Consequently, privacy and confidentiality \textbf{depend on the provider's policy}, whereas local safeguards focus on path-security policies. A compact set of commands (e.g., \texttt{READ}, \texttt{WRITE}, \texttt{MODIFY}, \texttt{TREE}, \texttt{LIST\_PATH}) enables the agent to observe the project, manipulate files, and apply targeted code modifications with \textit{diff}-based change system.

The \textit{Single-Shot Intelligence} architecture improves efficiency through an API call system consisting of: (1) intent classification, (2) dynamic acknowledgment, (3) planning phase for deep analysis and comprehensive JSON-based planning, (4) adaptive execution phase that can run in 1-3 sub-phases based on task complexity, and (5) next-step suggestions. The system includes single API key management, \textit{interrupt handling} (Ctrl+C), and session logging to \texttt{.pai\_history}.

We adopt a Research and Development approach with iterative prototyping. The evaluation uses representative programming scenarios and measures efficiency (API call count), correctness (build/run), and security compliance. Results indicate that a stateful agent with \textit{Single-Shot Intelligence} and \textit{diff}-based change constraints with dual thresholds (500-line absolute and 50\% maximum ratio) facilitates incremental development while reducing the risk of unintended overwrites. The adaptive execution system with 1-3 sub-phases proves more efficient than traditional approaches requiring multiple repetitive API calls, while maintaining high result quality.

\textbf{Keywords}: AI, agent, CLI, LLM, API, security, software, development.


% --- Switch to arabic numbering for main content ---
\cleardoublepage
\pagenumbering{arabic}
% Redefine plain for chapter pages in mainmatter
\fancypagestyle{plain}{
  \fancyhf{}
  \fancyfoot[C]{\thepage}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}
}
\pagestyle{mainmatterstyle} % Apply mainmatter style (page number bottom center)

% --- Chapters ---
\include{bab1_pendahuluan}
\include{bab2_tinjauan_pustaka}
\include{bab3_metodologi}
\include{bab4_implementasi_hasil}
\include{bab5_kesimpulan_saran}


% --- Bibliography ---
\cleardoublepage
\renewcommand{\bibname}{DAFTAR PUSTAKA} % Ensure UpperCase title
\addcontentsline{toc}{chapter}{DAFTAR PUSTAKA} % Add to TOC
\bibliographystyle{apalike-id} % Customized Indonesian style
\bibliography{daftar_pustaka}

% --- Appendices ---
\include{back_lampiran}

\end{document}
